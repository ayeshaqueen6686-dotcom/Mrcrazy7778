<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Crazy App</title>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>

  <style>
    :root {
      --primary: #6a4cff;
      --dark: #0f0f1e;
      --gray: #1e1e2e;
      --light: #f0f0ff;
    }
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #1a0033 0%, #2d0055 100%);
      min-height: 100vh;
      color: white;
    }

    /* PlayStore Style App Cards - Full Description */
    .app-card {
      background: rgba(255,255,255,0.1);
      backdrop-filter: blur(10px);
      border-radius: 16px;
      padding: 18px;
      margin-bottom: 18px;
      transition: all 0.4s ease;
      cursor: pointer;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    }

    .app-card:hover {
      transform: translateY(-10px);
      box-shadow: 0 20px 40px rgba(106, 76, 255, 0.4);
      background: rgba(255,255,255,0.15);
    }

    .app-header {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 12px;
    }

    .app-icon {
      width: 80px;
      height: 80px;
      border-radius: 16px;
      object-fit: cover;
      border: 3px solid var(--primary);
      box-shadow: 0 8px 20px rgba(106,76,255,0.4);
    }

    .app-title-info {
      flex: 1;
    }

    .app-name {
      font-size: 20px;
      font-weight: bold;
      margin-bottom: 4px;
    }

    .app-dev {
      font-size: 14px;
      opacity: 0.8;
      margin-bottom: 6px;
    }

    .app-size {
      font-size: 13px;
      opacity: 0.7;
    }

    .app-desc {
      font-size: 15px;
      line-height: 1.6;
      margin: 12px 0;
      opacity: 0.9;
      white-space: pre-wrap;
    }

    .app-stats {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 10px;
      font-size: 14px;
      opacity: 0.8;
    }

    .download-btn {
      background: var(--primary);
      padding: 12px 30px;
      border-radius: 30px;
      font-weight: bold;
      transition: 0.3s;
    }

    .download-btn:hover {
      background: #5a3dff;
      transform: scale(1.08);
    }

    /* Group Updates Card */
    .update-card {
      background: rgba(255,255,255,0.1);
      backdrop-filter: blur(10px);
      border-radius: 16px;
      padding: 18px;
      margin-bottom: 18px;
      transition: 0.3s;
      border-left: 5px solid var(--primary);
    }

    .update-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 35px rgba(106,76,255,0.3);
    }

    .update-text {
      font-size: 16px;
      line-height: 1.6;
      margin-bottom: 15px;
      white-space: pre-wrap;
    }

    .update-meta {
      font-size: 13px;
      opacity: 0.7;
      margin-bottom: 15px;
    }

    .reactions {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    .reaction-btn {
      background: rgba(255,255,255,0.15);
      padding: 8px 16px;
      border-radius: 30px;
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      transition: 0.3s;
      font-size: 14px;
    }

    .reaction-btn:hover {
      background: rgba(255,255,255,0.3);
      transform: scale(1.05);
    }

    .reaction-btn.active {
      background: var(--primary);
    }

    .container {
      max-width: 480px;
      margin: 0 auto;
      padding: 15px;
      min-height: 100vh;
    }
    .card {
      background: rgba(255,255,255,0.08);
      backdrop-filter: blur(12px);
      border-radius: 18px;
      padding: 20px;
      margin-bottom: 15px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.4);
      animation: slideUp 0.6s ease-out;
    }
    @keyframes slideUp {
      from { opacity:0; transform:translateY(20px); }
      to { opacity:1; transform:translateY(0); }
    }

    h1 {
      text-align:center;
      font-size:24px;
      margin-bottom:20px;
      background: linear-gradient(45deg, #fff, #c0bfff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    /* Notification Popups */
    .notification-popup {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.7);
      backdrop-filter: blur(10px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      animation: fadeInPopup 0.5s ease;
    }

    @keyframes fadeInPopup {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .notification-content {
      background: rgba(255,255,255,0.15);
      backdrop-filter: blur(20px);
      border-radius: 24px;
      padding: 30px;
      max-width: 90%;
      text-align: center;
      border: 2px solid var(--primary);
      box-shadow: 0 20px 50px rgba(106,76,255,0.5);
      position: relative;
    }

    .notification-content.emergency {
      border: 3px solid #ff4444;
      box-shadow: 0 20px 50px rgba(255,68,68,0.6);
    }

    .close-btn {
      position: absolute;
      top: 15px;
      right: 20px;
      font-size: 32px;
      cursor: pointer;
      opacity: 0.8;
      transition: 0.3s;
    }

    .close-btn:hover {
      opacity: 1;
      transform: scale(1.2);
    }
    
/* Animated Powered Banner - Bottom Center */
.powered-banner {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(20, 18, 38, 0.9);
  backdrop-filter: blur(20px);
  padding: 14px 30px;
  border-radius: 50px;
  border: 2px solid rgba(123, 44, 255, 0.5);
  box-shadow: 0 10px 30px rgba(123, 44, 255, 0.3);
  z-index: 999;
  animation: float 6s ease-in-out infinite;
  text-align: center;
}

.banner-content {
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 18px;
  font-weight: 600;
}

.pulse-text {
  color: #e0e0ff;
  animation: pulse 2s infinite;
}

.glow-text {
  background: linear-gradient(90deg, #7b2cff, #00d4ff, #ff4444);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  font-size: 22px;
  animation: glow 3s ease-in-out infinite alternate;
}

.sparkles {
  font-size: 20px;
  animation: sparkle 2s infinite;
}

@keyframes float {
  0%, 100% { transform: translateX(-50%) translateY(0); }
  50% { transform: translateX(-50%) translateY(-10px); }
}

@keyframes pulse {
  0%, 100% { opacity: 0.7; }
  50% { opacity: 1; }
}

@keyframes glow {
  0% { text-shadow: 0 0 10px rgba(123,44,255,0.8); }
  100% { text-shadow: 0 0 20px rgba(123,44,255,1), 0 0 30px rgba(0,212,255,0.6); }
}

@keyframes sparkle {
  0%, 100% { opacity: 0.6; transform: rotate(0deg); }
  50% { opacity: 1; transform: rotate(10deg); }
}

/* Mobile Fix */
@media (max-width: 768px) {
  .powered-banner {
    bottom: 15px;
    padding: 12px 24px;
    font-size: 16px;
  }
  .glow-text {
    font-size: 20px;
  }
}
    #normalMessage {
      font-size: 20px;
      line-height: 1.6;
      margin: 20px 0;
    }

    #emergencyDownloadBtn {
      margin-top: 25px;
      padding: 16px 40px;
      background: #ff4444;
      color: white;
      border: none;
      border-radius: 16px;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 10px 30px rgba(255,68,68,0.4);
      transition: 0.3s;
    }

    #emergencyDownloadBtn:hover {
      background: #ff0000;
      transform: scale(1.05);
    }

    input, textarea {
      width:100%;
      padding:12px;
      margin:8px 0;
      border:none;
      border-radius:10px;
      background:rgba(255,255,255,0.1);
      color:white;
      font-size:15px;
    }
    input::placeholder, textarea::placeholder { color:rgba(255,255,255,0.6); }
    button {
      width:100%;
      padding:12px;
      margin:10px 0;
      border:none;
      border-radius:10px;
      background: var(--primary);
      color:white;
      font-weight:bold;
      cursor:pointer;
      transition:0.3s;
    }
    button:hover { transform:scale(1.02); }
    .small-btn {
      background:rgba(255,255,255,0.1);
      margin:5px 0;
      text-align:left;
      padding-left:15px;
    }/* Entertainment Chat - Cool & Professional Look */
.entertainment-container {
  height: 55vh;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: 15px;
  background: rgba(255,255,255,0.05);
  border-radius: 16px;
  margin-bottom: 15px;
  scrollbar-width: thin;
  scrollbar-color: var(--primary) transparent;
}

.entertainment-msg {
  max-width: 80%;
  padding: 14px 20px;
  border-radius: 22px;
  background: rgba(255,255,255,0.12);
  backdrop-filter: blur(10px);
  box-shadow: 0 4px 15px rgba(0,0,0,0.2);
  transition: transform 0.2s;
}
/* About & Trust Page - Clean & Professional */
.trust-container {
  display: grid;
  gap: 20px;
  margin: 20px 0;
}

.trust-item {
  background: rgba(255,255,255,0.08);
  backdrop-filter: blur(15px);
  border-radius: 20px;
  padding: 22px;
  text-align: center;
  border: 1px solid rgba(123,44,255,0.3);
  transition: 0.4s;
  box-shadow: 0 8px 25px rgba(0,0,0,0.2);
}

.trust-item:hover {
  transform: translateY(-8px);
  box-shadow: 0 15px 40px rgba(123,44,255,0.4);
  border-color: var(--primary);
}

.trust-icon {
  font-size: 48px;
  margin-bottom: 15px;
}

.trust-title {
  font-size: 20px;
  font-weight: 700;
  background: linear-gradient(45deg, #7b2cff, #00d4ff);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: 12px;
}

.trust-desc {
  font-size: 15px;
  opacity: 0.9;
  line-height: 1.6;
}

.trust-footer {
  text-align: center;
  margin: 40px 0 20px;
  padding: 20px;
  background: rgba(123,44,255,0.15);
  border-radius: 20px;
  border: 1px dashed rgba(123,44,255,0.4);
}
/* Apps List - Grid Style */
#appsList {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  gap: 18px;
  margin: 20px 0;
}

.app-box {
  background: rgba(255,255,255,0.1);
  backdrop-filter: blur(12px);
  border-radius: 18px;
  padding: 16px;
  text-align: center;
  cursor: pointer;
  transition: 0.4s;
  border: 1px solid rgba(106,76,255,0.3);
}

.app-box:hover {
  transform: translateY(-8px);
  box-shadow: 0 15px 35px rgba(106,76,255,0.4);
  border-color: var(--primary);
}

.app-box img {
  width: 70px;
  height: 70px;
  border-radius: 16px;
  object-fit: cover;
  border: 3px solid var(--primary);
  margin-bottom: 10px;
}

.app-box .name {
  font-weight: bold;
  font-size: 15px;
  margin-bottom: 4px;
}

.app-box .dev {
  font-size: 13px;
  opacity: 0.8;
}

/* Modal */
.modal {
  position: fixed;
  top: 0; left: 0; width: 100%; height: 100%;
  background: rgba(0,0,0,0.9);
  backdrop-filter: blur(10px);
  z-index: 9999;
  display: flex;
  align-items: center;
  justify-content: center;
}

.modal-content {
  background: rgba(20,18,38,0.98);
  border-radius: 24px;
  padding: 30px;
  max-width: 90%;
  text-align: center;
  border: 2px solid var(--primary);
  box-shadow: 0 20px 50px rgba(106,76,255,0.6);
}

.close-modal {
  position: absolute;
  top: 15px;
  right: 20px;
  font-size: 35px;
  cursor: pointer;
  color: #ff4444;
}

.app-detail-icon {
  width: 120px;
  height: 120px;
  border-radius: 24px;
  border: 5px solid var(--primary);
  margin-bottom: 20px;
}

.app-detail-name {
  font-size: 26px;
  font-weight: bold;
  margin-bottom: 10px;
}

.app-detail-dev {
  font-size: 18px;
  opacity: 0.9;
  margin-bottom: 15px;
}

.app-detail-desc {
  font-size: 16px;
  line-height: 1.7;
  margin: 20px 0;
  padding: 15px;
  background: rgba(255,255,255,0.05);
  border-radius: 16px;
}

.download-big-btn {
  background: linear-gradient(135deg, #00cc88, #00aa66);
  padding: 18px 50px;
  border-radius: 50px;
  font-size: 20px;
  font-weight: bold;
  color: white;
  text-decoration: none;
  display: inline-block;
  margin-top: 20px;
  box-shadow: 0 10px 30px rgba(0,204,136,0.5);
}

.download-big-btn:hover {
  transform: scale(1.05);
}
.trust-footer p {
  opacity: 0.8;
  font-size: 16px;
}

.trust-footer h3 {
  font-size: 28px;
  background: linear-gradient(90deg, #7b2cff, #00d4ff, #ff4444);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  font-weight: 800;
  margin-top: 8px;
}
.entertainment-msg:hover {
  transform: translateY(-2px);
}

.entertainment-msg.own {
  align-self: flex-end;
  background: linear-gradient(135deg, #7b2cff, #9d59ff);
  color: white;
}

.entertainment-msg-header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 8px;
}

.entertainment-msg-pic {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  object-fit: cover;
  border: 3px solid var(--primary);
  box-shadow: 0 4px 10px rgba(123,44,255,0.4);
}

.entertainment-msg-username {
  font-weight: 600;
  font-size: 15px;
  color: #e0e0ff;
}

.entertainment-msg-text {
  font-size: 16px;
  line-height: 1.5;
  margin-bottom: 8px;
}

.entertainment-msg img {
  max-width: 240px;
  border-radius: 16px;
  margin-top: 10px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.3);
}

.entertainment-msg-time {
  font-size: 11px;
  opacity: 0.7;
  text-align: right;
}

.entertainment-reactions {
  display: flex;
  gap: 10px;
  margin-top: 10px;
  flex-wrap: wrap;
}

.entertainment-reaction {
  background: rgba(255,255,255,0.2);
  padding: 6px 12px;
  border-radius: 20px;
  font-size: 14px;
  cursor: pointer;
  transition: 0.3s;
  backdrop-filter: blur(5px);
}

.entertainment-reaction:hover {
  background: rgba(255,255,255,0.4);
  transform: scale(1.1);
}

.entertainment-reply {
  margin-left: 50px;
  margin-top: 12px;
  padding: 12px;
  background: rgba(255,255,255,0.08);
  border-radius: 18px;
  border-left: 4px solid var(--primary);
  font-size: 15px;
}

.entertainment-reply.own {
  background: rgba(123,44,255,0.2);
  border-left-color: #00cc88;
}
    .link {
      text-align:center;
      color:rgba(255,255,255,0.7);
      cursor:pointer;
      font-size:14px;
      margin-top:10px;
    }
    .hide { display:none; }
    .password-wrapper {
      position:relative;
    }
    .eye {
      position:absolute;
      right:12px;
      top:50%;
      transform:translateY(-50%);
      cursor:pointer;
    }
    .profile-pic {
      width:90px;
      height:90px;
      border-radius:50%;
      object-fit:cover;
      border:3px solid var(--primary);
      margin:15px auto;
      display:block;
      cursor:pointer;
    }
    .preview-box {
      position:relative;
      margin:10px 0;
      max-width:250px;
    }
    .preview-img {
      width:100%;
      border-radius:12px;
    }
    .remove-img {
      position:absolute;
      top:5px;
      right:5px;
      background:#ff0000aa;
      color:white;
      width:30px;
      height:30px;
      border-radius:50%;
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      font-size:18px;
    }
    .loading {
      text-align:center;
      color:#aaa;
      font-size:14px;
      margin:10px 0;
    }
    .status {
      font-size:12px;
      padding:5px 10px;
      border-radius:12px;
      display:inline-block;
      margin:5px 0;
    }/* Feedback Section - Professional Look */
.feedback-form {
  background: rgba(255,255,255,0.08);
  backdrop-filter: blur(12px);
  border-radius: 18px;
  padding: 20px;
  margin-bottom: 25px;
  border: 1px solid rgba(106,76,255,0.2);
}

.star-rating {
  text-align: center;
  margin: 20px 0;
}

.star {
  font-size: 40px;
  color: #444;
  cursor: pointer;
  transition: 0.3s;
  display: inline-block;
}

.star:hover, .star.active {
  color: #ffd700;
  transform: scale(1.1);
}

#ratingText {
  text-align: center;
  font-size: 16px;
  margin: 10px 0 20px;
  opacity: 0.9;
}

#feedbackText {
  width: 100%;
  padding: 16px;
  background: rgba(255,255,255,0.1);
  border: none;
  border-radius: 16px;
  color: white;
  font-size: 16px;
  resize: vertical;
  min-height: 120px;
  margin-bottom: 20px;
}

#feedbackText::placeholder {
  color: rgba(255,255,255,0.6);
}

/* Individual Feedback Card */
.feedback-item {
  background: rgba(255,255,255,0.08);
  backdrop-filter: blur(10px);
  border-radius: 16px;
  padding: 18px;
  margin-bottom: 16px;
  border-left: 4px solid var(--primary);
  transition: 0.3s;
}

.feedback-item:hover {
  transform: translateY(-4px);
  box-shadow: 0 10px 30px rgba(106,76,255,0.2);
}

.feedback-stars {
  font-size: 24px;
  color: #ffd700;
  margin-bottom: 10px;
}

.feedback-text {
  font-size: 16px;
  line-height: 1.6;
  margin-bottom: 15px;
  opacity: 0.95;
}

.feedback-actions {
  display: flex;
  gap: 20px;
  align-items: center;
}

.like-btn, .dislike-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  background: rgba(255,255,255,0.15);
  padding: 10px 18px;
  border-radius: 30px;
  cursor: pointer;
  font-size: 15px;
  transition: 0.3s;
}
.contact-box {
  display: grid;
  gap: 22px;
  margin: 30px 0;
}

.contact-item {
  background: rgba(255,255,255,0.08);
  backdrop-filter: blur(20px);
  border-radius: 24px;
  padding: 28px;
  text-align: center;
  border: 2px solid rgba(123,44,255,0.3);
  transition: 0.4s;
  box-shadow: 0 12px 35px rgba(0,0,0,0.3);
}

.contact-item:hover {
  transform: translateY(-12px);
  box-shadow: 0 25px 50px rgba(123,44,255,0.5);
  border-color: var(--primary);
}

.contact-icon {
  font-size: 60px;
  margin-bottom: 18px;
}

.contact-title {
  font-size: 22px;
  font-weight: bold;
  margin-bottom: 12px;
  background: linear-gradient(45deg, #7b2cff, #00d4ff);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.contact-detail {
  font-size: 18px;
  margin-bottom: 10px;
  color: white;
  word-break: break-all;
}

.contact-link {
  color: #00d4ff;
  font-size: 18px;
  text-decoration: none;
  font-weight: bold;
}

.contact-link:hover {
  text-decoration: underline;
}

.contact-note {
  font-size: 15px;
  opacity: 0.9;
  margin-top: 12px;
  color: rgba(255,255,255,0.9);
}

.coming-soon {
  opacity: 0.7;
}

.contact-footer {
  text-align: center;
  margin: 50px 0 20px;
  padding: 25px;
  background: rgba(123,44,255,0.15);
  border-radius: 24px;
  border: 2px dashed rgba(123,44,255,0.4);
}

.contact-footer p {
  margin: 10px 0;
  font-size: 17px;
}

.contact-footer strong {
  background: linear-gradient(90deg, #7b2cff, #00d4ff);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  font-size: 20px;
}
.like-btn:hover {
  background: rgba(0,204,136,0.3);
}

.dislike-btn:hover {
  background: rgba(255,68,68,0.3);
}

.like-btn.liked, .dislike-btn.disliked {
  background: var(--primary);
  font-weight: bold;
}

.like-count, .dislike-count {
  font-weight: bold;
}
    .pending { background:#ff8800; }
    .processing { background:#4488ff; }
    .approved { background:#00aa55; }
    .rejected { background:#aa0000; }

    /* Live Chat - Fixed Left/Right Alignment */
    .chat-container {
      height:55vh;
      overflow-y:auto;
      display:flex;
      flex-direction:column;
      padding:15px 10px;
      gap:15px;
      background: rgba(255,255,255,0.05);
      border-radius:16px;
      margin-bottom:15px;
    }
    .message {
      max-width:75%;
      padding:14px 18px;
      border-radius:20px;
      line-height:1.5;
      position:relative;
      word-wrap:break-word;
      box-shadow: 0 3px 12px rgba(0,0,0,0.3);
    }
  .message.user {
  align-self:flex-end;
  background:#00cc88;  /* Green colour for user messages */
  color:white;
  border-bottom-right-radius:5px;
}

.message.admin {
  align-self:flex-start;
  background:#ff4444;  /* Red colour for admin messages */
  color:white;
  border-bottom-left-radius:5px;
}
    .message img {
      max-width:220px;
      border-radius:12px;
      margin-top:10px;
      display:block;
    }
    .message small {
      display:block;
      margin-top:10px;
      font-size:11px;
      opacity:0.8;
      text-align:right;
    }
    .msg-actions {
      position:absolute;
      top:10px;
      right:15px;
      opacity:0;
      transition:opacity 0.3s;
    }
    .message.user:hover .msg-actions {
      opacity:1;
    }
    .msg-actions button {
      background:none;
      border:none;
      color:white;
      cursor:pointer;
      font-size:16px;
      margin-left:8px;
    }
.policy-container {
  max-width: 600px;
  margin: 0 auto;
}

.policy-header {
  text-align: center;
  margin-bottom: 40px;
}

.policy-header h2 {
  font-size: 32px;
  background: linear-gradient(90deg, #7b2cff, #00d4ff);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: 10px;
}

.policy-header p {
  font-size: 18px;
  opacity: 0.9;
}

.guideline-item {
  background: rgba(255,255,255,0.08);
  backdrop-filter: blur(15px);
  border-radius: 24px;
  padding: 25px;
  margin: 20px 0;
  display: flex;
  gap: 20px;
  border-left: 6px solid var(--primary);
  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
  transition: 0.4s;
}

.guideline-item:hover {
  transform: translateX(10px);
  box-shadow: 0 15px 40px rgba(123,44,255,0.4);
}

.guideline-number {
  font-size: 50px;
  font-weight: bold;
  opacity: 0.3;
  min-width: 80px;
  text-align: center;
}

.guideline-text {
  font-size: 17px;
  line-height: 1.7;
}

.guideline-text strong {
  color: var(--primary);
  font-size: 19px;
}

/* CEO Section */
.ceo-section {
  background: linear-gradient(135deg, rgba(123,44,255,0.2), rgba(0,212,255,0.1));
  border-radius: 30px;
  padding: 40px;
  margin: 50px 0;
  text-align: center;
  border: 2px solid rgba(123,44,255,0.4);
  box-shadow: 0 20px 50px rgba(123,44,255,0.3);
}

.ceo-avatar {
  width: 120px;
  height: 120px;
  background: var(--primary);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 70px;
  margin: 0 auto 20px;
  box-shadow: 0 15px 40px rgba(123,44,255,0.6);
}

.ceo-info h3 {
  font-size: 20px;
  opacity: 0.9;
  margin-bottom: 8px;
}

.ceo-info h2 {
  font-size: 36px;
  font-weight: bold;
  background: linear-gradient(90deg, #7b2cff, #00d4ff);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: 15px;
}

.policy-footer {
  text-align: center;
  margin: 50px 0;
  padding: 30px;
  background: rgba(123,44,255,0.15);
  border-radius: 28px;
  border: 2px dashed rgba(123,44,255,0.5);
}

.policy-footer p {
  font-size: 18px;
  margin: 12px 0;
}

.policy-footer strong {
  font-size: 24px;
  background: linear-gradient(90deg, #ff4444, #00cc88);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}
    .chat-input {
      display:flex;
      gap:10px;
      margin-top:10px;
      align-items:center;
    }
    .chat-input input {
      flex:1;
      padding:16px;
      background:rgba(255,255,255,0.1);
      border:none;
      border-radius:30px;
      color:white;
      font-size:16px;
    }
    .chat-input input::placeholder {
      color:rgba(255,255,255,0.6);
    }
    .chat-input button {
      width:auto;
      padding:16px 24px;
      background:var(--primary);
      border:none;
      border-radius:30px;
      font-weight:bold;
      cursor:pointer;
    }
    .info-row {
      background: rgba(255,255,255,0.1);
      padding:12px;
      border-radius:10px;
      margin:10px 0;
      word-break: break-all;
    }
  </style>
</head>
<body>
  
<!-- Notification Popups -->
<div id="normalNotification" class="notification-popup hide">
  <div class="notification-content">
    <span class="close-btn" onclick="closeNormalNotification()">√ó</span>
    <p id="normalMessage"></p>
  </div>
</div>

<div id="emergencyNotification" class="notification-popup hide">
  <div class="notification-content emergency">
    <span class="close-btn" onclick="closeEmergencyNotification()">√ó</span>
    <p id="emergencyMessage" style="font-size:18px; font-weight:bold;"></p>
    <button id="emergencyDownloadBtn" onclick="openEmergencyLink()">Download Update Now</button>
  </div>
</div>

<div class="container">

  <!-- Login Page -->
  <div id="loginPage" class="card">
    <h1>Welcome üëã</h1>
    <input type="email" id="loginEmail" placeholder="Email" />
    <div class="password-wrapper">
      <input type="password" id="loginPass" placeholder="Password" />
      <span class="eye" onclick="togglePass('loginPass')">üëÅÔ∏è</span>
    </div>
    <button onclick="login()">Login</button>
    <div class="link" onclick="showSignup()">Don't have an account? Sign Up</div>
    <div class="link" onclick="showForgot()">Forgot Password?</div>
  </div>

  <!-- Signup Page -->
  <div id="signupPage" class="card hide">
    <h1>Create Account üöÄ</h1>
    <input type="text" id="username" placeholder="Username" />
    <input type="email" id="signupEmail" placeholder="Email" />
    <div class="password-wrapper">
      <input type="password" id="signupPass" placeholder="Password" />
      <span class="eye" onclick="togglePass('signupPass')">üëÅÔ∏è</span>
    </div>
    <div class="password-wrapper">
      <input type="password" id="confirmPass" placeholder="Confirm Password" />
      <span class="eye" onclick="togglePass('confirmPass')">üëÅÔ∏è</span>
    </div>
    <button onclick="signup()">Sign Up</button>
    <div class="link" onclick="showLogin()">Already have an account? Login</div>
  </div>

  <!-- Forgot Password -->
  <div id="forgotPage" class="card hide">
    <h1>Reset Password üîë</h1>
    <input type="email" id="forgotEmail" placeholder="Enter your email" />
    <button onclick="forgotPass()">Send Reset Link</button>
    <div class="link" onclick="showLogin()">Back to Login</div>
  </div>

  <!-- Dashboard -->
  <div id="dashboard" class="card hide">
    <h1>Hello <span id="displayName" style="font-weight:bold; color:#fff;"></span> üëã</h1>
    <img id="profilePic" src="" class="profile-pic" onclick="document.getElementById('picInput').click()" />
    <input type="file" id="picInput" accept="image/*" style="display:none" onchange="uploadProfilePic(this)" />
    <p><strong>Email:</strong> <span id="displayEmail"></span></p>

    <button class="small-btn" onclick="showProfile()">My Profile</button>
    <button class="small-btn" onclick="showSupport()">Support (€ÅŸÖ ÿ≥€í ÿ±ÿßÿ®ÿ∑€Å)</button>
    <button class="small-btn" onclick="showComplaintHistory()">Complaint History</button><button class="small-btn" onclick="showFeedback()">Feedback & Ratings üåü</button>
    <button class="small-btn" onclick="showMyApps()">My Apps</button>
    <button class="small-btn" onclick="showGroup()">Group & Updates</button><button class="small-btn" onclick="showEntertainmentChat()">Entertainment Chat üéâ</button>
    
    <button class="small-btn" onclick="showTrustPage()">About & Trust üåü</button>
    <button class="small-btn" onclick="showContact()">Contact Us üìû</button>
    <button class="small-btn" onclick="showPolicy()">Policy & Guidelines üìú</button>
    
    
    
    
    <button
    class="small-btn" style="background:#ff4444" onclick="logout()">Logout</button>
  </div>

  <!-- My Profile -->
  <div id="profilePage" class="card hide">
    <h1>My Profile</h1>
    <img id="bigPic" src="" class="profile-pic" onclick="document.getElementById('picInput2').click()" />
    <input type="file" id="picInput2" accept="image/*" style="display:none" onchange="uploadProfilePic(this)" />
    <p style="text-align:center; margin:10px 0; color:#ccc; font-size:13px;">Tap photo to change (max 5MB)</p>

    <div class="info-row"><strong>Username:</strong> <span id="profileName"></span></div>
    <div class="info-row"><strong>Email:</strong> <span id="profileEmail"></span></div>
    <div class="info-row password-wrapper">
      <strong>Password:</strong> 
      <span id="profilePass" style="margin-left:10px; letter-spacing:2px;">‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢</span>
      <span class="eye" onclick="toggleProfilePass()">üëÅÔ∏è</span>
    </div>

    <div class="link" onclick="showDashboard()">‚Üê Back to Dashboard</div>
  </div>

  <!-- Support -->
  <div id="supportPage" class="card hide">
    <h1>Support (€ÅŸÖ ÿ≥€í ÿ±ÿßÿ®ÿ∑€Å)</h1>
    <button class="small-btn" onclick="showComplaintForm()">File Complaint</button>
    <button class="small-btn" onclick="showLiveChat()">Live Chat with MrCrazyTeam</button>
    <div class="link" onclick="showDashboard()">‚Üê Back</div>
  </div>

  <!-- File Complaint -->
  <div id="complaintForm" class="card hide">
    <h1>File Complaint</h1>
    <input type="text" id="compName" placeholder="Your Name" readonly />
    <input type="email" id="compEmail" placeholder="Your Email" readonly />
    <textarea id="compDesc" placeholder="Describe your problem in detail" rows="5"></textarea>

    <div style="margin:15px 0;">
      <button type="button" onclick="document.getElementById('compImage').click()" style="width:auto; padding:10px 15px; background:rgba(255,255,255,0.2);">
        Add Screenshot (max 5MB)
      </button>
      <input type="file" id="compImage" accept="image/*" style="display:none" onchange="previewImage(this)" />
      <div id="loadingText" class="loading hide">Uploading... ‚è≥</div>
      <div id="imagePreview" class="preview-box hide">
        <img id="previewImg" class="preview-img" />
        <div class="remove-img" onclick="removeImage()">‚úï</div>
      </div>
    </div>

    <button onclick="submitComplaint()">Submit Complaint</button>
    <div class="link" onclick="showSupport()">‚Üê Back</div>
  </div><!-- Feedback Section -->
<div id="feedbackPage" class="card hide">
  <h1>Feedback & Ratings üåü</h1>

  <!-- Submit Feedback Form -->
  <div class="feedback-form">
    <div class="star-rating">
      <span class="star" onclick="setRating(1)">‚òÖ</span>
      <span class="star" onclick="setRating(2)">‚òÖ</span>
      <span class="star" onclick="setRating(3)">‚òÖ</span>
      <span class="star" onclick="setRating(4)">‚òÖ</span>
      <span class="star" onclick="setRating(5)">‚òÖ</span>
    </div>
    <p id="ratingText">Tap to rate</p>

    <textarea id="feedbackText" placeholder="Share your experience or suggestion..." rows="4"></textarea>

    <button onclick="submitFeedback()">Submit Feedback</button>
  </div>

  <!-- All Feedbacks List -->
  <div id="feedbackList" style="margin-top:30px;"></div>

  <div class="link" onclick="showDashboard()">‚Üê Back to Dashboard</div>
</div>
<!-- Policy & Guidelines Section -->
<div id="policyPage" class="card hide">
  <h1>Policy & Guidelines üìú</h1>

  <div class="policy-container">

    <div class="policy-header">
      <h2>Community Guidelines</h2>
      <p>We believe in a safe, respectful and fun community ‚ù§Ô∏è</p>
    </div>

    <div class="guideline-item">
      <div class="guideline-number">01</div>
      <div class="guideline-text">
        <strong>Be Respectful</strong><br>
        No hate speech, harassment, bullying or personal attacks allowed.
      </div>
    </div>

    <div class="guideline-item">
      <div class="guideline-number">02</div>
      <div class="guideline-text">
        <strong>No Spam or Scam</strong><br>
        No promotional links, fake giveaways or fraudulent activities.
      </div>
    </div>

    <div class="guideline-item">
      <div class="guideline-number">03</div>
      <div class="guideline-text">
        <strong>Keep it Clean</strong><br>
        No adult content, violence or illegal discussions.
      </div>
    </div>

    <div class="guideline-item">
      <div class="guideline-number">04</div>
      <div class="guideline-text">
        <strong>Privacy First</strong><br>
        Never share personal information of others without permission.
      </div>
    </div>

    <div class="guideline-item">
      <div class="guideline-number">05</div>
      <div class="guideline-text">
        <strong>Follow Rules</strong><br>
        Violation of any rule may result in warning or permanent ban.
      </div>
    </div>

    <div class="ceo-section">
      <div class="ceo-photo">
        <div class="ceo-avatar">üëë</div>
      </div>
      <div class="ceo-info">
        <h3>Founder & CEO</h3>
        <h2>Muhammad Naeem</h2>
        <p>Leading MrCrazyTeam with passion & dedication since day one ‚ù§Ô∏è</p>
      </div>
    </div>

    <div class="policy-footer">
      <p>Thank you for being part of our community</p>
      <p><strong>MrCrazyTeam</strong> ‚Äî Built with love & trust</p>
    </div>

  </div>

  <div class="link" onclick="showDashboard()">‚Üê Back to Dashboard</div>
</div>
<!-- Entertainment Chat Section -->
<div id="entertainmentPage" class="card hide">
  <h1>Entertainment Chat üéâ</h1>
  <div id="entertainmentContainer" class="entertainment-container"></div>
  
  <div class="chat-input">
    <button class="attach-btn" onclick="document.getElementById('entertainmentImage').click()">üì∑</button>
    <input type="text" id="entertainmentMsg" placeholder="Share something fun..." onkeydown="if(event.key==='Enter') sendEntertainmentMessage()" />
    <button onclick="sendEntertainmentMessage()">Send</button>
  </div>
  <input type="file" id="entertainmentImage" accept="image/*" style="display:none" onchange="sendEntertainmentImage(this)" />
  
  <div class="link" onclick="showDashboard()">‚Üê Back to Dashboard</div>
</div>
<!-- Contact Us Section -->
<div id="contactPage" class="card hide">
  <h1>Contact Us üìû</h1>

  <div class="contact-box">
    <div class="contact-item">
      <div class="contact-icon">üìß</div>
      <div class="contact-title">Email Us</div>
      <div class="contact-detail">MrCrazyTeamofficial@gmail.com</div>
      <div class="contact-note">24/7 Support Available</div>
    </div>

    <div class="contact-item">
      <div class="contact-icon">üåê</div>
      <div class="contact-title">Our Website</div>
      <a href="https://MrCrazy7778.taplink.ws" target="_blank" class="contact-link">MrCrazy7778.taplink.ws</a>
    </div>

    <div class="contact-item">
      <div class="contact-icon">üí¨</div>
      <div class="contact-title">WhatsApp Channel</div>
      <a href="https://whatsapp.com/channel/0029VbBwFGO9Bb5s9beJ201f" target="_blank" class="contact-link">
        Join Our Channel
      </a>
      <div class="contact-note">Your number will NEVER be shown to anyone üîí</div>
    </div>

    <div class="contact-item coming-soon">
      <div class="contact-icon">üì±</div>
      <div class="contact-title">Direct WhatsApp</div>
      <div class="contact-detail">Coming Soon...</div>
    </div>
  </div>
<!-- You Need Any App - Lobby -->
<div id="needAppLobby" class="card hide">
  <h1>You Need Any App? üì≤</h1>

  <div class="need-app-main-text">
    <p>Can't find or download any app?</p>
    <p><strong>Don't worry ‚Äì we will send it to you on WhatsApp!</strong></p>
  </div>

  <div class="need-apps-grid" id="needAppsGrid"></div>

  <div class="link" onclick="showDashboard()">‚Üê Back to Dashboard</div>
</div>

<!-- App Detail Page (Dashboard jaisa) -->
<div id="appDetailDashboard" class="card hide">
  <h1 id="detailAppName">App Name</h1>

  <div class="app-detail-content">
    <div class="detail-icon" id="detailIcon">üì±</div>
    <p class="detail-description" id="detailDescription">Full description here...</p>

    <div class="whatsapp-request-box">
      <input type="text" id="whatsappInput" placeholder="Enter your WhatsApp number (03XXXXXXXXX)" maxlength="11" />
      <button onclick="sendWhatsAppRequest()" class="send-wapp-btn">Send Request on WhatsApp</button>
    </div>

    <div class="success-message hide" id="successMsg">
      ‚úÖ Request sent successfully!<br>
      You will receive the app on WhatsApp within 1-2 hours.<br>
      Thank you for choosing MrCrazyTeam ‚ù§Ô∏è
    </div>
  </div>

  <div class="link" onclick="backToNeedAppLobby()">‚Üê Back</div>
</div>
  <div class="contact-footer">
    <p>We reply as fast as possible ‚ù§Ô∏è</p>
    <p>Made with love by <strong>MRCRAZYTEAM</strong></p>
  </div>

  <div class="link" onclick="showDashboard()">‚Üê Back to Dashboard</div>
</div>
  <!-- Group & Updates Section -->
  <div id="groupPage" class="card hide">
    <h1>Group & Updates üë•</h1>
    <div style="text-align:center; margin:20px 0; padding:15px; background:rgba(255,255,255,0.1); border-radius:12px;">
      <p style="font-size:18px; opacity:0.8;">Total Members in Group</p>
      <p id="totalUsersCount" style="font-size:32px; font-weight:bold; color:var(--primary);">0</p>
    </div>
    <div id="updatesList" style="margin-top:20px;"></div>
    <div class="link" onclick="showDashboard()">‚Üê Back to Dashboard</div>
  </div>

<!-- My Apps - Fixed Full List + Details on Click -->
<div id="myAppsPage" class="card hide">
  <h1>My Apps üì±</h1>
  <div id="appsList"></div>
  <div class="link" onclick="showDashboard()">‚Üê Back to Dashboard</div>
</div>

<!-- App Details Modal -->
<div id="appDetailsModal" class="modal hide">
  <div class="modal-content">
    <span class="close-modal" onclick="closeModal()">√ó</span>
    <div id="appDetails"></div>
  </div>
</div>
  <!-- Complaint History -->
  <div id="historyPage" class="card hide">
    <h1>Complaint History</h1>
    <div id="complaintsList"></div>
    <div class="link" onclick="showDashboard()">‚Üê Back</div>
  </div>

  <!-- Live Chat - Fixed Left/Right -->
  <div id="chatPage" class="card hide">
    <h1>Live Chat with MrCrazyTeam üí¨</h1>
    <div id="chatContainer" class="chat-container"></div>
    <div class="chat-input">
      <button onclick="document.getElementById('chatImage').click()">üì∑</button>
      <input type="text" id="chatMsg" placeholder="Type your message..." onkeydown="if(event.key==='Enter') sendChatMessage()" />
      <button onclick="sendChatMessage()">Send</button>
    </div>
    <input type="file" id="chatImage" accept="image/*" style="display:none" onchange="sendChatImage(this)" />
    <div class="link" onclick="showSupport()">‚Üê Back</div>
  </div>
<!-- About & Trust Page -->
<div id="trustPage" class="card hide">
  <h1>About & Trust üåü</h1>

  <div class="trust-container">
    <div class="trust-item">
      <div class="trust-icon">üîí</div>
      <div class="trust-title">100% Password Safe</div>
      <div class="trust-desc">We never ask for your passwords or store them. Your account is fully secure with Firebase Authentication.</div>
    </div>

    <div class="trust-item">
      <div class="trust-icon">üìß</div>
      <div class="trust-title">Real Support</div>
      <div class="trust-desc">Live Chat with Admin available 24/7. Real humans, real help ‚Äì no bots!</div>
    </div>

    <div class="trust-item">
      <div class="trust-icon">üõ°Ô∏è</div>
      <div class="trust-title">Safe & Secure</div>
      <div class="trust-desc">All data encrypted. Screenshot & recording blocked. Your privacy is our priority.</div>
    </div>

    <div class="trust-item">
      <div class="trust-icon">üí¨</div>
      <div class="trust-title">Community First</div>
      <div class="trust-desc">Entertainment Chat, Group Updates, Feedback ‚Äì everything made for real users by real team.</div>
    </div>
  </div>

  <div class="trust-footer">
    <p>Made with ‚ù§Ô∏è by</p>
    <h3>MRCRAZYTEAM</h3>
  </div>

  <div class="link" onclick="showDashboard()">‚Üê Back to Dashboard</div>
</div>
</div>
<!-- Sabse neeche daal do, </body> se pehle -->
<div class="mrcrazy-bottom-banner">
  <span>Powered by</span>
  <strong>MRCRAZYTEAM</strong>
</div>

<style>
  .mrcrazy-bottom-banner {
    position: fixed;
    bottom: 8px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(15, 12, 40, 0.9);
    backdrop-filter: blur(15px);
    color: #e0e0ff;
    font-family: 'Poppins', sans-serif;
    font-size: 13px;
    font-weight: 600;
    padding: 8px 20px;
    border-radius: 30px;
    border: 1px solid rgba(123, 44, 255, 0.4);
    box-shadow: 0 6px 20px rgba(123, 44, 255, 0.3);
    z-index: 9999;
    display: flex;
    align-items: center;
    gap: 8px;
    animation: gentleFloat 5s ease-in-out infinite;
  }

  .mrcrazy-bottom-banner strong {
    background: linear-gradient(90deg, #7b2cff, #00d4ff);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    font-size: 15px;
  }

  @keyframes gentleFloat {
    0%, 100% { transform: translateX(-50%) translateY(0); }
    50% { transform: translateX(-50%) translateY(-5px); }
  }

  /* Mobile pe aur chhota */
  @media (max-width: 480px) {
    .mrcrazy-bottom-banner {
      bottom: 6px;
      padding: 7px 16px;
      font-size: 12px;
    }
    .mrcrazy-bottom-banner strong { font-size: 14px; }
  }
</style>
</div>
<script>
  const firebaseConfig = {
    apiKey: "AIzaSyD3uBXUfhb6yG0ScWjXKf3DV-rpG_1fmaI",
    authDomain: "crazy-9a4d8.firebaseapp.com",
    databaseURL: "https://crazy-9a4d8-default-rtdb.firebaseio.com",
    projectId: "crazy-9a4d8",
    storageBucket: "crazy-9a4d8.appspot.com",
  };

  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.database();
  const storage = firebase.storage();
  let currentUser = null;
  let selectedFile = null;

  auth.onAuthStateChanged(user => {
    if (user) {
      currentUser = user;
      loadUserData(user);
      showDashboard();
      checkNotifications();
    } else {
      showLogin();
      currentUser = null;
    }
  });

  function togglePass(id) {
    const f = document.getElementById(id);
    f.type = f.type === "password" ? "text" : "password";
  }

  function toggleProfilePass() {
    const passField = document.getElementById('profilePass');
    if (passField.textContent === "‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢") {
      passField.textContent = "[Hidden for security]";
    } else {
      passField.textContent = "‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢";
    }
  }

  function showLogin() { hideAll(); document.getElementById('loginPage').classList.remove('hide'); }
  function showSignup() { hideAll(); document.getElementById('signupPage').classList.remove('hide'); }
  function showForgot() { hideAll(); document.getElementById('forgotPage').classList.remove('hide'); }
  function showDashboard() { hideAll(); document.getElementById('dashboard').classList.remove('hide'); }
  function showProfile() { hideAll(); document.getElementById('profilePage').classList.remove('hide'); loadProfile(); }
  function showSupport() { hideAll(); document.getElementById('supportPage').classList.remove('hide'); }
  function showComplaintForm() { 
    hideAll(); 
    document.getElementById('complaintForm').classList.remove('hide'); 
    document.getElementById('compName').value = currentUser.displayName || "User";
    document.getElementById('compEmail').value = currentUser.email;
    document.getElementById('compDesc').value = "";
    document.getElementById('imagePreview').classList.add('hide');
    selectedFile = null;
  }
  function showComplaintHistory() { hideAll(); document.getElementById('historyPage').classList.remove('hide'); loadComplaints(); }
  function showLiveChat() { hideAll(); document.getElementById('chatPage').classList.remove('hide'); loadPrivateChat(); }
  function showGroup() { hideAll(); document.getElementById('groupPage').classList.remove('hide'); loadTotalUsers(); loadUpdates(); }
  function showMyApps() { hideAll(); document.getElementById('myAppsPage').classList.remove('hide'); loadApps(); }

  function hideAll() {
    document.querySelectorAll('.card').forEach(c => c.classList.add('hide'));
  }

  function signup() {
    const username = document.getElementById('username').value.trim();
    const email = document.getElementById('signupEmail').value.trim();
    const pass = document.getElementById('signupPass').value;
    const confirm = document.getElementById('confirmPass').value;

    if (pass !== confirm) return alert("Passwords don't match!");
    if (!username || !email || !pass) return alert("Fill all fields!");

    auth.createUserWithEmailAndPassword(email, pass)
      .then(cred => {
        return db.ref('users/' + cred.user.uid).set({
          username: username,
          email: email,
          photoURL: "",
          createdAt: Date.now()
        });
      })
      .then(() => alert("Account created successfully! üòç"))
      .catch(err => alert(err.message));
  }

  function login() {
    const email = document.getElementById('loginEmail').value;
    const pass = document.getElementById('loginPass').value;
    auth.signInWithEmailAndPassword(email, pass).catch(err => alert(err.message));
  }
function showTrustPage() {
  hideAll();
  document.getElementById('trustPage').classList.remove('hide');
}
  function forgotPass() {
    const email = document.getElementById('forgotEmail').value;
    if (!email) return alert("Enter email!");
    auth.sendPasswordResetEmail(email)
      .then(() => alert("Reset link sent to your email! üìß"))
      .catch(err => alert(err.message));
  }

  function logout() {
    auth.signOut();
  }

  function loadUserData(user) {
    db.ref('users/' + user.uid).once('value').then(snap => {
      const data = snap.val() || {};
      document.getElementById('displayName').textContent = data.username || "User";
      document.getElementById('displayEmail').textContent = data.email || user.email;

      const picUrl = data.photoURL || `https://ui-avatars.com/api/?name=${data.username || "U"}&background=6a4cff&color=fff&size=128`;
      document.getElementById('profilePic').src = picUrl;
    });
  }

  function loadProfile() {
    db.ref('users/' + currentUser.uid).once('value').then(snap => {
      const data = snap.val() || {};
      document.getElementById('profileName').textContent = data.username || "User";
      document.getElementById('profileEmail').textContent = data.email || currentUser.email;

      const picUrl = data.photoURL || `https://ui-avatars.com/api/?name=${data.username || "U"}&background=6a4cff&color=fff&size=256`;
      document.getElementById('bigPic').src = picUrl;
    });
  }

  function uploadProfilePic(input) {
    const file = input.files[0];
    if (!file) return;
    if (file.size > 5 * 1024 * 1024) return alert("Image must be under 5MB!");

    const ref = storage.ref('profile_pics/' + currentUser.uid);
    ref.put(file).then(() => {
      ref.getDownloadURL().then(url => {
        db.ref('users/' + currentUser.uid).update({ photoURL: url });
        alert("Profile picture updated! üî•");
      });
    });
  }
function showPolicy() {
  hideAll();
  document.getElementById('policyPage').classList.remove('hide');
}
  function previewImage(input) {
    const file = input.files[0];
    if (!file) return;
    if (file.size > 5 * 1024 * 1024) return alert("Image must be under 5MB!");
    selectedFile = file;

    const reader = new FileReader();
    reader.onload = function(e) {
      document.getElementById('previewImg').src = e.target.result;
      document.getElementById('imagePreview').classList.remove('hide');
    }
    reader.readAsDataURL(file);
  }
let entertainmentReplyingTo = null;

// Show Entertainment Chat
function showEntertainmentChat() {
  hideAll();
  document.getElementById('entertainmentPage').classList.remove('hide');
  loadEntertainmentChat();
}

// Load Entertainment Chat (Public - Everyone can see)
function loadEntertainmentChat() {
  const container = document.getElementById('entertainmentContainer');

  db.ref('entertainmentChat').orderByChild('timestamp').on('value', snap => {
    container.innerHTML = "";
    if (!snap.val()) {
      container.innerHTML = `<p style="text-align:center; opacity:0.7; padding:60px; font-size:18px;">Be the first to share something fun! üéâ</p>`;
      return;
    }

    snap.forEach(msgSnap => {
      const m = msgSnap.val();
      const key = msgSnap.key;
      const isOwn = m.uid === currentUser.uid;

      const div = document.createElement('div');
      div.className = `entertainment-msg ${isOwn ? 'own' : ''}`;

      let content = m.image ? `<img src="${m.image}" />` : `<div class="entertainment-msg-text">${m.message}</div>`;

      let reactionsHTML = '';
      const emojis = { heart:'‚ù§Ô∏è', fire:'üî•', laugh:'üòÇ', wow:'üòÆ', clap:'üëè' };
      if (m.reactions) {
        for (const e in emojis) {
          if (m.reactions[e] > 0) {
            reactionsHTML += `<span class="entertainment-reaction" onclick="reactEntertainment('${key}', '${e}')">${emojis[e]} ${m.reactions[e]}</span>`;
          }
        }
      }

      let repliesHTML = '';
      if (m.replies) {
        Object.entries(m.replies).forEach(([rKey, r]) => {
          const replyOwn = r.uid === currentUser.uid;
          let replyContent = r.image ? `<img src="${r.image}" style="max-width:200px; border-radius:12px;" />` : r.message;
          repliesHTML += `<div class="entertainment-reply ${replyOwn ? 'own' : ''}">
            <strong>${r.username || 'User'}:</strong> ${replyContent}
          </div>`;
        });
      }

      div.innerHTML = `
        <div class="entertainment-msg-header">
          <img src="${m.photoURL || 'https://ui-avatars.com/api/?name=' + encodeURIComponent(m.username || 'U') + '&background=7b2cff&color=fff&size=128'}" class="entertainment-msg-pic" />
          <div class="entertainment-msg-username">${m.username || 'User'}</div>
        </div>
        ${content}
        <div class="entertainment-msg-time">${new Date(m.timestamp).toLocaleTimeString([], {hour: '2-digit', minute: '2-digit'})}</div>
        <div class="entertainment-reactions">${reactionsHTML}</div>
        <div style="margin-top:10px; font-size:14px; opacity:0.9; cursor:pointer;" onclick="replyEntertainment('${key}')">‚Ü©Ô∏è Reply</div>
        ${repliesHTML}
      `;

      // Own message actions
      if (isOwn) {
        div.innerHTML += `<div style="margin-top:12px; text-align:right;">
          <button style="font-size:13px; padding:6px 12px; background:rgba(255,255,255,0.2); border-radius:12px;" onclick="editEntertainmentMsg('${key}', '${(m.message || '').replace(/'/g, "\\'")}')">Edit</button>
          <button style="font-size:13px; padding:6px 12px; background:#ff4444; border-radius:12px; margin-left:8px;" onclick="deleteEntertainmentMsg('${key}')">Delete</button>
        </div>`;
      }

      container.appendChild(div);
    });

    container.scrollTop = container.scrollHeight;
  });
}

// Reply Mode
function replyEntertainment(key) {
  entertainmentReplyingTo = key;
  document.getElementById('entertainmentMsg').placeholder = "Replying to a message...";
  document.getElementById('entertainmentMsg').focus();
}

// Send Message
function sendEntertainmentMessage() {
  const input = document.getElementById('entertainmentMsg');
  const msg = input.value.trim();
  if (!msg) return;

  db.ref('users/' + currentUser.uid).once('value').then(snap => {
    const u = snap.val() || {};
    const data = {
      uid: currentUser.uid,
      username: u.username || "User",
      photoURL: u.photoURL || "",
      message: msg,
      timestamp: Date.now(),
      reactions: {}
    };

    if (entertainmentReplyingTo) {
      db.ref('entertainmentChat/' + entertainmentReplyingTo + '/replies').push(data);
      entertainmentReplyingTo = null;
      input.placeholder = "Share something fun...";
    } else {
      db.ref('entertainmentChat').push(data);
    }

    input.value = "";
  });
}

// Send Image
function sendEntertainmentImage(input) {
  const file = input.files[0];
  if (!file || file.size > 5*1024*1024) {
    alert("Max 5MB!");
    return;
  }

  db.ref('users/' + currentUser.uid).once('value').then(snap => {
    const u = snap.val() || {};
    const ref = storage.ref('entertainment_images/' + Date.now());
    ref.put(file).then(() => {
      ref.getDownloadURL().then(url => {
        const data = {
          uid: currentUser.uid,
          username: u.username || "User",
          photoURL: u.photoURL || "",
          image: url,
          timestamp: Date.now(),
          reactions: {}
        };

        if (entertainmentReplyingTo) {
          db.ref('entertainmentChat/' + entertainmentReplyingTo + '/replies').push(data);
          entertainmentReplyingTo = null;
        } else {
          db.ref('entertainmentChat').push(data);
        }

        input.value = "";
      });
    });
  });
}

// React
function reactEntertainment(key, emoji) {
  db.ref(`entertainmentChat/${key}/reactions/${emoji}`).transaction(c => (c || 0) + 1);
}

// Edit & Delete Own
function editEntertainmentMsg(key, old) {
  const newMsg = prompt("Edit message:", old);
  if (newMsg && newMsg !== old) {
    db.ref('entertainmentChat/' + key).update({ message: newMsg });
  }
}

function deleteEntertainmentMsg(key) {
  if (confirm("Delete this message?")) {
    db.ref('entertainmentChat/' + key).remove();
  }
}
  function removeImage() {
    selectedFile = null;
    document.getElementById('compImage').value = "";
    document.getElementById('imagePreview').classList.add('hide');
  }

  function submitComplaint() {
    const desc = document.getElementById('compDesc').value.trim();
    if (!desc) return alert("Please describe your problem!");

    document.getElementById('loadingText').classList.remove('hide');
    document.querySelector('#complaintForm button').disabled = true;

    const complaintRef = db.ref('complaints').push();
    const complaintId = "CMP-" + complaintRef.key.slice(-8).toUpperCase();

    const data = {
      uid: currentUser.uid,
      name: document.getElementById('compName').value,
      email: document.getElementById('compEmail').value,
      description: desc,
      complaintId: complaintId,
      status: "pending",
      adminReply: "",
      timestamp: Date.now()
    };

    if (selectedFile) {
      const storageRef = storage.ref('complaints/' + complaintRef.key);
      storageRef.put(selectedFile).then(() => {
        storageRef.getDownloadURL().then(url => {
          data.screenshot = url;
          saveComplaint(complaintRef, data);
        });
      });
    } else {
      saveComplaint(complaintRef, data);
    }
  }

  function saveComplaint(ref, data) {
    ref.set(data).then(() => {
      alert(`Complaint submitted!\nComplaint ID: ${data.complaintId}\nSave it for reference check your complaint in complain history!`);
      document.getElementById('loadingText').classList.add('hide');
      document.querySelector('#complaintForm button').disabled = false;
      showSupport();
    });
  }

  let emergencyLink = "";

  function checkNotifications() {
    db.ref('notifications/normal').once('value').then(snap => {
      const data = snap.val();
      if (data && data.active && data.message) {
        document.getElementById('normalMessage').textContent = data.message;
        document.getElementById('normalNotification').classList.remove('hide');
      }
    });

    db.ref('notifications/emergency').once('value').then(snap => {
      const data = snap.val();
      if (data && data.active && data.message && data.link) {
        document.getElementById('emergencyMessage').textContent = data.message;
        emergencyLink = data.link;
        document.getElementById('emergencyNotification').classList.remove('hide');
      }
    });
  }

  function closeNormalNotification() {
    document.getElementById('normalNotification').classList.add('hide');
  }

  function closeEmergencyNotification() {
    document.getElementById('emergencyNotification').classList.add('hide');
  }

  function openEmergencyLink() {
    if (emergencyLink) {
      window.open(emergencyLink, '_blank');
    }
  }

  function loadComplaints() {
    const list = document.getElementById('complaintsList');
    list.innerHTML = "<p>Loading...</p>";

    db.ref('complaints').orderByChild('uid').equalTo(currentUser.uid).on('value', snap => {
      list.innerHTML = "";
      if (!snap.val()) {
        list.innerHTML = "<p>No complaints yet</p>";
        return;
      }

      const complaints = [];
      snap.forEach(child => complaints.push({key: child.key, ...child.val()}));
      complaints.sort((a,b) => b.timestamp - a.timestamp);

      complaints.forEach(c => {
        const div = document.createElement('div');
        div.className = "card";
        div.style.marginBottom = "15px";
        div.innerHTML = `
          <p><strong>Complaint ID:</strong> ${c.complaintId}</p>
          <p><strong>Issue:</strong> ${c.description}</p>
          ${c.screenshot ? `<img src="${c.screenshot}" class="preview-img" style="max-width:100%; border-radius:12px; margin:10px 0;" />` : ''}
          <p><span class="status ${c.status}">${c.status.toUpperCase()}</span></p>
          ${c.adminReply ? `<p><strong>Admin Reply:</strong> ${c.adminReply}</p>` : '<p><i>No reply yet</i></p>'}
          <small>Submitted: ${new Date(c.timestamp).toLocaleString()}</small>
        `;
        list.appendChild(div);
      });
    });
  }

  // Group & Updates - Working with Reactions
  function loadTotalUsers() {
    db.ref('users').on('value', snap => {
      const count = snap.numChildren();
      document.getElementById('totalUsersCount').textContent = count;
    });
  }

  function loadUpdates() {
    const list = document.getElementById('updatesList');
    list.innerHTML = '<p style="text-align:center; opacity:0.7;">Loading updates...</p>';
    
    db.ref('groupUpdates').orderByChild('timestamp').on('value', snap => {
      list.innerHTML = "";
      if (!snap.val()) {
        list.innerHTML = '<p style="text-align:center; opacity:0.7; padding:30px;">No updates from admin yet üëÄ</p>';
        return;
      }
      
      const updates = [];
      snap.forEach(child => {
        updates.push({ key: child.key, ...child.val() });
      });
      
      updates.sort((a, b) => b.timestamp - a.timestamp);
      
      updates.forEach(update => {
        const div = document.createElement('div');
        div.className = "update-card";
        
        const reactions = update.reactions || { heart: 0, laugh: 0, wow: 0, like: 0, dislike: 0 };
        
        div.innerHTML = `
          <div class="update-text">${update.message || ''}</div>
          <div class="update-meta">Posted by MRCRAZYTEAM ‚Ä¢ ${new Date(update.timestamp).toLocaleString()}</div>
          <div class="reactions">
            <div class="reaction-btn" onclick="reactToUpdate('${update.key}', 'heart')">
              ‚ù§Ô∏è <span>${reactions.heart}</span>
            </div>
            <div class="reaction-btn" onclick="reactToUpdate('${update.key}', 'laugh')">
              üòÇ <span>${reactions.laugh}</span>
            </div>
            <div class="reaction-btn" onclick="reactToUpdate('${update.key}', 'wow')">
              üòÆ <span>${reactions.wow}</span>
            </div>
            <div class="reaction-btn" onclick="reactToUpdate('${update.key}', 'like')">
              üëç <span>${reactions.like}</span>
            </div>
            <div class="reaction-btn" onclick="reactToUpdate('${update.key}', 'dislike')">
              üëé <span>${reactions.dislike}</span>
            </div>
          </div>
        `;
        
        list.appendChild(div);
      });
    });
  }

  function reactToUpdate(updateKey, emoji) {
    if (!currentUser) {
      alert("Login karo pehle!");
      return;
    }
    
    const reactionPath = `groupUpdates/${updateKey}/reactions/${emoji}`;
    const userReactionPath = `groupUpdates/${updateKey}/userReactions/${currentUser.uid}`;
    
    db.ref(userReactionPath).once('value').then(snap => {
      if (snap.val() === emoji) {
        db.ref(userReactionPath).remove();
        db.ref(reactionPath).transaction(count => (count || 1) - 1);
      } else {
        db.ref(userReactionPath).set(emoji);
        db.ref(reactionPath).transaction(count => (count || 0) + 1);
        
        if (snap.val()) {
          const oldEmoji = snap.val();
          db.ref(`groupUpdates/${updateKey}/reactions/${oldEmoji}`).transaction(count => (count || 1) - 1);
        }
      }
    });
  }

function showMyApps() {
  hideAll();
  document.getElementById('myAppsPage').classList.remove('hide');
  loadAppsList();
}

function loadAppsList() {
  const list = document.getElementById('appsList');
  list.innerHTML = '<p style="text-align:center; opacity:0.7;">Loading apps...</p>';
  
  db.ref('apps').orderByChild('timestamp').on('value', snap => {
    list.innerHTML = "";
    
    if (!snap.val()) {
      list.innerHTML = '<p style="text-align:center; opacity:0.7; padding:50px;">No apps available yet</p>';
      return;
    }
    
    const apps = [];
    snap.forEach(child => {
      apps.push({ id: child.key, ...child.val() });
    });
    apps.sort((a, b) => b.timestamp - a.timestamp);
    
    apps.forEach(app => {
      const div = document.createElement('div');
      div.className = "app-box";
      div.onclick = () => showAppDetails(app);
      
      const icon = app.icon || `https://ui-avatars.com/api/?name=${encodeURIComponent(app.name)}&background=7b2cff&color=fff&size=256`;
      
      div.innerHTML = `
        <img src="${icon}" alt="${app.name}">
        <div class="name">${app.name}</div>
        <div class="dev">by ${app.developer || 'MrCrazy'}</div>
      `;
      
      list.appendChild(div);
    });
  });
}
function showContact() {
  hideAll();
  document.getElementById('contactPage').classList.remove('hide');
}
function showAppDetails(app) {
  const modal = document.getElementById('appDetailsModal');
  const details = document.getElementById('appDetails');
  
  const icon = app.icon || `https://ui-avatars.com/api/?name=${encodeURIComponent(app.name)}&background=7b2cff&color=fff&size=512`;
  
  details.innerHTML = `
    <img src="${icon}" class="app-detail-icon" alt="${app.name}">
    <div class="app-detail-name">${app.name}</div>
    <div class="app-detail-dev">by ${app.developer || 'MrCrazyTeam'}</div>
    <div class="app-detail-desc">${app.description || 'No description available'}</div>
    <div style="font-size:16px; opacity:0.8; margin:15px 0;">Size: ${app.size || 'Unknown'}</div>
    <a href="${app.downloadLink}" target="_blank" class="download-big-btn">Download Now üì•</a>
  `;
  
  modal.classList.remove('hide');
}

function closeModal() {
  document.getElementById('appDetailsModal').classList.add('hide');
}

// Close modal if clicked outside
window.onclick = function(e) {
  const modal = document.getElementById('appDetailsModal');
  if (e.target === modal) closeModal();
}
  // Private Live Chat - Fixed Left/Right
  function loadPrivateChat() {
    const container = document.getElementById('chatContainer');

    db.ref('livechat').orderByChild('timestamp').on('value', snap => {
      container.innerHTML = "";
      if (!snap.val()) {
        container.innerHTML = "<p style='text-align:center; opacity:0.7; padding:50px;'>No messages yet. Start chatting!</p>";
        return;
      }

      snap.forEach(msgSnap => {
        const m = msgSnap.val();
        const key = msgSnap.key;

        // Private condition: Only own or targeted admin messages
        if (m.uid === currentUser.uid || (m.name === "Admin" && m.toUid === currentUser.uid)) {
          const isOwn = m.uid === currentUser.uid;

          const bubble = document.createElement('div');
          bubble.className = `message ${isOwn ? 'user' : 'admin'}`;

          if (m.image) {
            bubble.innerHTML = `<img src="${m.image}" />`;
          } else {
            bubble.innerHTML = m.message || "";
          }

          bubble.innerHTML += `<small>${new Date(m.timestamp).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</small>`;

          if (isOwn) {
            bubble.innerHTML += `
              <div class="msg-actions">
                <button onclick="editChatMessage('${key}', '${(m.message || '').replace(/'/g, "\\'")}')">Edit</button>
                <button onclick="deleteChatMessage('${key}')">Delete</button>
              </div>
            `;
          }

          container.appendChild(bubble);
        }
      });

      container.scrollTop = container.scrollHeight;
    });
  }
let currentRating = 0;

// Show Feedback Page
function showFeedback() {
  hideAll();
  document.getElementById('feedbackPage').classList.remove('hide');
  currentRating = 0;
  updateRatingDisplay();
  loadAllFeedbacks();
}

// Star Rating
function setRating(rating) {
  currentRating = rating;
  updateRatingDisplay();
}

function updateRatingDisplay() {
  document.querySelectorAll('.star').forEach((star, index) => {
    if (index < currentRating) {
      star.classList.add('active');
    } else {
      star.classList.remove('active');
    }
  });

  const texts = ["", "Poor", "Okay", "Good", "Great", "Excellent!"];
  document.getElementById('ratingText').textContent = texts[currentRating];
}

// Submit Feedback
function submitFeedback() {
  const text = document.getElementById('feedbackText').value.trim();
  if (currentRating === 0) {
    alert("Please give a star rating!");
    return;
  }
  if (!text) {
    alert("Please write your feedback!");
    return;
  }

  const data = {
    rating: currentRating,
    message: text,
    timestamp: Date.now(),
    likes: 0,
    dislikes: 0,
    likedBy: {},
    dislikedBy: {}
  };

  db.ref('feedbacks').push(data).then(() => {
    alert("Thank you for your feedback! üåü");
    document.getElementById('feedbackText').value = "";
    currentRating = 0;
    updateRatingDisplay();
  });
}

// Load All Feedbacks
function loadAllFeedbacks() {
  const list = document.getElementById('feedbackList');
  list.innerHTML = '<p style="text-align:center; opacity:0.7;">Loading feedbacks...</p>';

  db.ref('feedbacks').orderByChild('timestamp').on('value', snap => {
    list.innerHTML = "";
    if (!snap.val()) {
      list.innerHTML = '<p style="text-align:center; opacity:0.7; padding:40px;">No feedback yet. Be the first! ‚úçÔ∏è</p>';
      return;
    }

    const feedbacks = [];
    snap.forEach(child => feedbacks.push({key: child.key, ...child.val()}));
    feedbacks.sort((a,b) => b.timestamp - a.timestamp);

    feedbacks.forEach(f => {
      const div = document.createElement('div');
      div.className = "feedback-item";

      const stars = '‚òÖ'.repeat(f.rating) + '‚òÜ'.repeat(5 - f.rating);

      const userLiked = f.likedBy && f.likedBy[currentUser.uid];
      const userDisliked = f.dislikedBy && f.dislikedBy[currentUser.uid];

      div.innerHTML = `
        <div class="feedback-stars">${stars}</div>
        <div class="feedback-text">${f.message}</div>
        <div class="feedback-actions">
          <div class="like-btn ${userLiked ? 'liked' : ''}" onclick="toggleLike('${f.key}', true)">
            üëç <span class="like-count">${f.likes || 0}</span>
          </div>
          <div class="dislike-btn ${userDisliked ? 'disliked' : ''}" onclick="toggleLike('${f.key}', false)">
            üëé <span class="dislike-count">${f.dislikes || 0}</span>
          </div>
        </div>
      `;

      list.appendChild(div);
    });
  });
}

// Like / Dislike (One time per user)
function toggleLike(key, isLike) {
  const userPath = `feedbacks/${key}/${isLike ? 'likedBy' : 'dislikedBy'}/${currentUser.uid}`;
  const countPath = `feedbacks/${key}/${isLike ? 'likes' : 'dislikes'}`;
  const oppositePath = `feedbacks/${key}/${isLike ? 'dislikedBy' : 'likedBy'}/${currentUser.uid}`;

  db.ref(userPath).once('value').then(snap => {
    if (snap.val()) {
      // Already liked/disliked ‚Üí remove
      db.ref(userPath).remove();
      db.ref(countPath).transaction(c => (c || 1) - 1);
    } else {
      // Add like/dislike
      db.ref(userPath).set(true);
      db.ref(countPath).transaction(c => (c || 0) + 1);

      // Remove opposite if exists
      db.ref(oppositePath).remove();
      const oppCount = isLike ? 'dislikes' : 'likes';
      db.ref(`feedbacks/${key}/${oppCount}`).transaction(c => Math.max(0, (c || 1) - 1));
    }
  });
}
  function sendChatMessage() {
    const msg = document.getElementById('chatMsg').value.trim();
    if (!msg) return;

    db.ref('livechat').push({
      uid: currentUser.uid,
      name: currentUser.displayName || "User",
      message: msg,
      timestamp: Date.now()
    });

    document.getElementById('chatMsg').value = "";
  }

  function editChatMessage(key, oldMsg) {
    const newMsg = prompt("Edit your message:", oldMsg);
    if (newMsg && newMsg !== oldMsg) {
      db.ref('livechat/' + key).update({ message: newMsg });
    }
  }

  function deleteChatMessage(key) {
    if (confirm("Delete your message?")) {
      db.ref('livechat/' + key).remove();
    }
  }

  function sendChatImage(input) {
    const file = input.files[0];
    if (!file || file.size > 5*1024*1024) return alert("Max 5MB!");
    const ref = storage.ref('chat_images/' + Date.now() + '_' + currentUser.uid);
    ref.put(file).then(() => {
      ref.getDownloadURL().then(url => {
        db.ref('livechat').push({
          uid: currentUser.uid,
          name: currentUser.displayName || "User",
          image: url,
          timestamp: Date.now()
        });
        input.value = "";
      });
    });
  }
let currentSelectedApp = null;

function showNeedAppLobby() {
  hideAll();
  document.getElementById('needAppLobby').classList.remove('hide');
  loadNeedApps();
}

function loadNeedApps() {
  const grid = document.getElementById('needAppsGrid');
  grid.innerHTML = '<p style="grid-column:1/-1;text-align:center;opacity:0.7;">Loading apps...</p>';

  db.ref('needAnyApp').on('value', snap => {
    grid.innerHTML = "";

    if (!snap.val()) {
      grid.innerHTML = '<p style="grid-column:1/-1;text-align:center;opacity:0.7;padding:60px;">No apps listed yet</p>';
      return;
    }

    snap.forEach(child => {
      const app = child.val();
      const div = document.createElement('div');
      div.className = "need-app-box";
      div.onclick = () => openAppDetailDashboard(app);
      div.innerHTML = `
        <div class="icon">${app.icon || 'üì±'}</div>
        <div class="name">${app.name}</div>
      `;
      grid.appendChild(div);
    });
  });
}

function openAppDetailDashboard(app) {
  currentSelectedApp = app;

  hideAll();
  document.getElementById('appDetailDashboard').classList.remove('hide');
  document.getElementById('detailAppName').textContent = app.name;
  document.getElementById('detailIcon').textContent = app.icon || 'üì±';
  document.getElementById('detailDescription').textContent = app.description || 'App will be sent on WhatsApp';
  document.getElementById('successMsg').classList.add('hide');
}

function backToNeedAppLobby() {
  showNeedAppLobby();
}

function sendWhatsAppRequest() {
  const number = document.getElementById('whatsappInput').value.trim();

  if (!number || number.length !== 11 || !number.startsWith('03')) {
    alert("Valid 11-digit WhatsApp number daalen (03XXXXXXXXX)");
    return;
  }

  // Save request for admin
  db.ref('appRequests').push({
    appName: currentSelectedApp.name,
    whatsapp: number,
    username: currentUser.displayName || "User",
    uid: currentUser.uid,
    timestamp: Date.now(),
    status: "pending"
  }).then(() => {
    document.getElementById('whatsappInput').value = "";
    document.getElementById('successMsg').classList.remove('hide');
  });
}
</script>

</body>
</html>
